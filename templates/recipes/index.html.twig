{% extends 'base.html.twig' %}

{% block title %}Recettes
{% endblock %}

{% block body %}
	<header>
		<h1 class="text-center shadow">NOS RECETTES</h1>
		<div class="searchFilter d-flex flex-column">
			<div class="sortBtn d-flex justify-content-center flex-wrap">
				<div class="btn-group">
						<span class="visually-hidden">Toggle Dropdown</span>
					</button>
					{{ form_start(form) }}
					<div class="pb-3 d-flex justify-content-center align-items-center gap-3 flex-column">
					{{ form_row(form.submit)}}</div>
					{{ form_row(form.search, { 'attr': {'class': 'px-4'}}) }} 
					<div class="d-flex justify-content-center align-item-center gap-3">
						{{ form_row(form.level, { 'attr': {'class': 'btn btn-outline-success px-5'} }) }}
						{{ form_row(form.season, { 'attr': {'class': 'btn btn-outline-success px-5'} }) }}
						{{ form_row(form.type, { 'attr': {'class': 'btn btn-outline-success px-5'} }) }}
					</div>
					{{ form_end(form) }}
				</div>
			</div>
		</div>
	</header>

	<main>
		<div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-4 list">
			{% for recipe in recipes %}
				<div class="col">
					<div class="card shadow mb-5 bg-body-tertiary rounded-4 image">
						<img src="{{ vich_uploader_asset(recipe, 'imageFile') }}" class="card-img-top" alt="image de la recette">
						<div class="card-body overflow-hidden">
							<h5 class="card-title text-center text-justify fs-5 text-success">{{recipe.name}}</h5>
							<p class="card-text">{{recipe.description}}</p>
						</div>
						<div class="d-flex justify-content-between info">
							<p class="saison">Saison</p>
							<span class="material-symbols-outlined">
								favorite
							</span>
						</div>
					</div>

				</div>
			{% endfor %}
		</div>
			{# <nav aria-label="..." class="d-flex justify-content-center">
				<ul class="pagination">
					<li class="page-item disabled">
						<span class="page-link text-success">Précédent</span>
					</li>
					<li class="page-item ">
						<a class="page-link text-success" href="#">1</a>
					</li>
					<li class="page-item  active" aria-current="page">
						<span class="page-link bg-success border-success ">2</span>
					</li>
					<li class="page-item ">
						<a class="page-link text-success" href="#">3</a>
					</li>
					<li class="page-item">
						<a class="page-link text-success" href="#">Suivant</a>
					</li>
				</ul>
			</nav> #}
			<div class="navigation d-flex justify-content-center">
                {{ knp_pagination_render(recipes) }}
            </div>
	</main>
	<script>
	const level = document.getElementById('recipe_search_level');
	const season = document.getElementById('recipe_search_season');
	const form = document.querySelector ("[name='recipe_search']");
	const type= document.getElementById('recipe_search_type');
	console.log(level, season, form);
	function onChange(){
		form.submit();
	}
	level.addEventListener('change', onChange);
	season.addEventListener('change', onChange);
	type.addEventListener('change', onChange);
	</script>

{% endblock %}
